(import std)

(define (main Unit)
  (let ((primes (sieve (range-from 2))))
    (for primes (<o display show-int))))

(define (sieve xs)
  (Iter (fun (_)
          (let1 (Pair x xs') (next! xs)
            (Some (Pair x
                        (sieve (filter (<o not (flip divisible? x))
                                       xs'))))))))
